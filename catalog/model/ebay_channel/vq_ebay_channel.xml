<?xml version="1.0" encoding="UTF-8"?>
<modification>
    <id>Ebay Cahnnel</id>
    <version>1.0.1</version>
    <vqmver required="true">2.4.0</vqmver>
    <author>Corcodel Ion</author>

    <file name="admin/view/template/sale/order_form.tpl">
        <operation error="log">
            <search position="after">
                <![CDATA[id="tab-customer"]]>
            </search>
            <add>
                <![CDATA[
			<?php if(!empty($ebay_order_id)) {?>
			<table class="form" style="margin-bottom: 0;">
				 <tr>
	              <td>Ebay userID</td>
	              <td><b><a href="http://www.ebay.com/usr/<?php echo $ebay_buyer_user_id; ?>" target="_blank"><?php echo $ebay_buyer_user_id; ?></a></b></td>
	            </tr>
	            <tr>
	              <td>Ebay address owner</td>
	              <td><b><?php echo $ebay_address_owner; ?></b></td>
	            </tr>
			</table>
			<?php } ?>
			]]>
            </add>
        </operation>

        <operation error="log">
            <search position="before">
                <![CDATA[$error_payment_country]]>
            </search>
            <add>
                <![CDATA[<?php if(!empty($ebay_order_id)) {?><div style="margin-top: 5px;">Ebay: <b><?php echo $ebay_country; ?></b></div><?php } ?>
			]]>
            </add>
        </operation>

        <operation error="log">
            <search position="before">
                <![CDATA[$error_shipping_country]]>
            </search>
            <add>
                <![CDATA[<?php if(!empty($ebay_order_id)) {?> <div style="margin-top: 5px;">Ebay: <b><?php echo $ebay_country; ?></b></div> <?php } ?>]]>
            </add>
        </operation>

        <operation error="log">
            <search position="before">
                <![CDATA[$error_payment_zone]]>
            </search>
            <add>
                <![CDATA[<?php if(!empty($ebay_order_id)) {?><div style="margin-top: 5px;">Ebay: <b><?php echo $ebay_state_or_province; ?></b></div><?php } ?>]]>
            </add>
        </operation>

        <operation error="log">
            <search position="before">
                <![CDATA[$error_shipping_zone]]>
            </search>
            <add>
                <![CDATA[<?php if(!empty($ebay_order_id)) {?> <div style="margin-top: 5px;">Ebay: <b><?php echo $ebay_state_or_province; ?></b></div><?php } ?>]]>
            </add>
        </operation>

        <operation error="log">
            <search position="after" offset="5">
                <![CDATA[id="tab-total"]]>
            </search>
            <add>
                <![CDATA[<?php if(!empty($ebay_order_id)) {?> <td class="left">eBay Order Line Item ID</td><td class="left">eBay Shipment Tracking Number</td> <?php } ?>]]>
            </add>
        </operation>

        <operation error="log">
            <search position="after">
                <![CDATA[<td class="left"><?php echo $order_product['model']; ?></td>]]>
            </search>
            <add>
                <![CDATA[<?php if(!empty($ebay_order_id)) {?> <td class="left"><?php echo $order_product['ebay_order_line_item_id']; ?></td><td class="left"><?php echo $order_product['ebay_shipment_tracking_number']; ?></td> <?php } ?>]]>
            </add>
        </operation>

        <operation error="log">
            <search position="replace">
                <![CDATA[<td class="right" colspan="4"><?php echo $order_total['title']; ?>]]>
            </search>
            <add>
                <![CDATA[<td class="right" colspan="<?php if(!empty($ebay_order_id)) {?>6<?php } else { ?>4<?php } ?>"><?php echo $order_total['title']; ?>]]>
            </add>
        </operation>


        <operation error="log">
            <search position="before" offset="1">
                <![CDATA[$entry_shipping;]]>
            </search>
            <add>
                <![CDATA[
			<?php if(!empty($ebay_order_id)) {?>
				<tr>
	              <td class="left">Ebay Order ID:</td>
	              <td class="left"><b><?php echo $ebay_order_id; ?></b></td>
	            </tr>
	            
				<tr>
	              <td class="left">Ebay Order Status:</td>
	              <td class="left"><b><?php echo $ebay_order_status; ?></b></td>
	            </tr>
			
				<tr>
	              <td class="left">Ebay userID:</td>
	              <td class="left"><b><a href="http://www.ebay.com/usr/<?php echo $ebay_buyer_user_id; ?>" target="_blank"><?php echo $ebay_buyer_user_id; ?></a></b></td>
	            </tr>
	            
	            <tr>
	              <td class="left">Ebay Payment Method:</td>
	              <td class="left"><b><?php echo $ebay_payment_method; ?></b></td>
	            </tr>
	            
	            <tr>
	              <td class="left">Ebay Shipping Service:</td>
	              <td class="left"><b><?php echo $ebay_shipping_service; ?></b></td>
	            </tr>
	            
				<tr>
	              <td class="left">Ebay Amount Paid:</td>
	              <td class="left"><b><?php echo $ebay_amount_paid; ?></b></td>
	            </tr>
	            	            
	            <tr>
	              <td class="left">Ebay Paid Time:</td>
	              <td class="left"><b><?php echo $ebay_paid_time; ?></b></td>
	            </tr>
	            
	            <tr>
	              <td class="left">Ebay Shipped Time:</td>
	              <td class="left"><b><?php echo $ebay_shipped_time; ?></b></td>
	            </tr>
	          <?php } ?>  
	          ]]>
            </add>
        </operation>


        <operation error="log">
            <search position="after">
                <![CDATA[<div id="tab-product" class="vtabs-content">]]>
            </search>
            <add>
                <![CDATA[
<?php if(!empty($ebay_order_id)) {?>
               <table class="list ebay-items">
            <thead>
              <tr>
                <td class="left">Item</td>
                <td class="left">Order Line Item ID</td>
                <td class="right"><?php echo $column_quantity; ?></td>
                <td class="right"><?php echo $column_price; ?></td>
                <td class="right">Tracking Number</td>
                <td class="right">Shipping Carrier Used</td>
                <td class="right">Mark as Paid?</td>
                <td class="right">Actions</td>
              </tr>
            </thead>
            <tbody id="product">
              <?php if ($order_products) { ?>
              <?php foreach ($order_products as $order_product) { ?>
              <tr>
                <td class="left"><?php echo $order_product['name']; ?></td>
                <td class="right"><?php echo $order_product['ebay_order_line_item_id']; ?></td>
                <td class="right"><?php echo $order_product['quantity']; ?></td>
                <td class="right"><?php echo $order_product['price']; ?></td>
               <td class="left">
                    <input type="text" class="tracking_number" style="width: 90%;" value="<?php echo $order_product['ebay_shipment_tracking_number']; ?>"/>
                </td>
                 <td class="left">
                    <input type="text" class="shipping_carrier_used" style="width: 90%;" value="<?php echo $ebay_shipping_service; ?>"/>
                </td>
                <td class="right"><input type="checkbox" class="is_paid"></td>
                <td class="right">
                   <a href="<?php echo $complete_sale_url; ?>" data-lineid="<?php echo $order_product['ebay_order_line_item_id']; ?>" class="button apply-order">Apply</a>
                </td>
              </tr>
              <?php } ?>
              <?php } else { ?>
              <tr>
                <td class="center" colspan="7"><?php echo $text_no_results; ?></td>
              </tr>
              <?php } ?>
            </tbody>
          </table>


          <script>
          $( document ).ready(function() {
              $('#tab-product table.list').hide();
              $('#tab-product table.ebay-items').show();
          });
                $('.apply-order').click(function(){
                    if(confirm("Do you wont to submit this info on eBay?")) {
                         var btn = $(this);
                         var label = btn.html();
                         btn.html('Loading...');
                         var track = $('.tracking_number', btn.closest('tr')).val();
                         var carrier = $('.shipping_carrier_used', btn.closest('tr')).val();
                         var is_paid = $('.is_paid:checked', btn.closest('tr')).length;
                         var order_line_item_id = btn.attr('data-lineid');
                         $.post(btn.attr('href'), {'shipping_carrier_used' : carrier, 'tracking_number': track, 'is_paid' : is_paid, 'order_line_item_id' : order_line_item_id}, function(){
                              btn.html(label);
                         });
                    }
                    return false;
                });
          </script>



 <?php } ?>
                ]]>
            </add>
        </operation>

    </file>
    <file name="admin/model/sale/order.php">
        <operation error="log">
            <search position="after">
                <![CDATA[$order_query->row['user_agent']]]>
            </search>
            <add>
                <![CDATA[
				'ebay_buyer_user_id' => $order_query->row['ebay_buyer_user_id'],
				'ebay_country' => $order_query->row['ebay_country'],
				'ebay_state_or_province' => $order_query->row['ebay_state_or_province'],
				'ebay_address_owner' => $order_query->row['ebay_address_owner'],
				'ebay_paid_time' => $order_query->row['ebay_paid_time'],
				'ebay_shipped_time' => $order_query->row['ebay_shipped_time'],
				'ebay_order_status' => $order_query->row['ebay_order_status'],
				'ebay_order_id' => $order_query->row['ebay_order_id'],
				'ebay_payment_method' => $order_query->row['ebay_payment_method'],
				'ebay_shipping_service' => $order_query->row['ebay_shipping_service'],
				'ebay_amount_paid' => $order_query->row['ebay_amount_paid'],
				'currency_code' => $order_query->row['currency_code'],
				
			]]>
            </add>
        </operation>

        <operation error="log">
            <search position="replace">
                <![CDATA[CONCAT(o.firstname, ' ', o.lastname) AS customer]]>
            </search>
            <add>
                <![CDATA[CONCAT(o.firstname, ' ', o.lastname) AS customer, ebay_order_id]]>
            </add>
        </operation>

        <operation error="log">
            <search position="before">
                <![CDATA[if (!empty($data['filter_order_id'])) {]]>
            </search>
            <add>
                <![CDATA[
                    if (!empty($data['filter_order_source'])) {
                       if ($data['filter_order_source'] == 1) {
                           $sql .= " AND (ebay_order_id is NULL OR  ebay_order_id = '')";
                       } else if ($data['filter_order_source'] == 2) {
                           $sql .= " AND (ebay_order_id is not null AND  ebay_order_id <> '')";
                       }
                    }
                ]]>
            </add>
        </operation>

    </file>

    <file name="admin/controller/sale/order.php">
        <operation error="log">
            <search position="after">
                <![CDATA[$this->model_setting_store->getStores()]]>
            </search>
            <add>
                <![CDATA[
				if (!empty($order_info)) {
					$this->data['ebay_buyer_user_id'] = $order_info['ebay_buyer_user_id'];
					$this->data['ebay_country'] = $order_info['ebay_country'];
					$this->data['ebay_state_or_province'] = $order_info['ebay_state_or_province'];
					$this->data['ebay_address_owner'] = $order_info['ebay_address_owner'];
					$this->data['ebay_paid_time'] = $order_info['ebay_paid_time'];
					$this->data['ebay_shipped_time'] = $order_info['ebay_shipped_time'];
					$this->data['ebay_order_status'] = $order_info['ebay_order_status'];
					$this->data['ebay_order_id'] = $order_info['ebay_order_id'];
					$this->data['ebay_payment_method'] = $order_info['ebay_payment_method'];
					$this->data['ebay_shipping_service'] = $order_info['ebay_shipping_service'];
					$this->data['ebay_amount_paid'] = $order_info['ebay_amount_paid'] . ' ' . $order_info['currency_code'];
				} else {
					$this->data['ebay_buyer_user_id'] = '';
					$this->data['ebay_country'] = '';
					$this->data['ebay_state_or_province'] = '';
					$this->data['ebay_address_owner'] = '';
					$this->data['ebay_paid_time'] = '';
					$this->data['ebay_shipped_time'] = '';
					$this->data['ebay_order_status'] = '';
					$this->data['ebay_order_id'] = '';
					$this->data['ebay_payment_method'] = '';
					$this->data['ebay_shipping_service'] = '';
					$this->data['ebay_amount_paid'] = '';
				}
			]]>
            </add>
        </operation>

        <operation error="log">
            <search position="after">
                <![CDATA[$this->data['credit_total'] = $this->model_sale_customer->getTotalTransactionsByOrderId($this->request->get['order_id']);]]>
            </search>
            <add>
                <![CDATA[
				if (!empty($order_info)) {
					$this->data['ebay_buyer_user_id'] = $order_info['ebay_buyer_user_id'];
					$this->data['ebay_country'] = $order_info['ebay_country'];
					$this->data['ebay_state_or_province'] = $order_info['ebay_state_or_province'];
					$this->data['ebay_address_owner'] = $order_info['ebay_address_owner'];
					$this->data['ebay_paid_time'] = $order_info['ebay_paid_time'];
					$this->data['ebay_shipped_time'] = $order_info['ebay_shipped_time'];
					$this->data['ebay_order_status'] = $order_info['ebay_order_status'];
					$this->data['ebay_order_id'] = $order_info['ebay_order_id'];
					$this->data['ebay_payment_method'] = $order_info['ebay_payment_method'];
					$this->data['ebay_shipping_service'] = $order_info['ebay_shipping_service'];
					$this->data['ebay_amount_paid'] = $order_info['ebay_amount_paid'] . ' ' . $order_info['currency_code'];
				} else {
					$this->data['ebay_buyer_user_id'] = '';
					$this->data['ebay_country'] = '';
					$this->data['ebay_state_or_province'] = '';
					$this->data['ebay_address_owner'] = '';
					$this->data['ebay_paid_time'] = '';
					$this->data['ebay_shipped_time'] = '';
					$this->data['ebay_order_status'] = '';
					$this->data['ebay_order_id'] = '';
					$this->data['ebay_payment_method'] = '';
					$this->data['ebay_shipping_service'] = '';
					$this->data['ebay_amount_paid'] = '';
				}
			]]>
            </add>
        </operation>

        <operation error="log">
            <search position="before">
                <![CDATA[if (($this->request->server['REQUEST_METHOD'] == 'POST') && $this->validateForm()) {]]>
            </search>
            <add>
                <![CDATA[$this->data['complete_sale_url'] = $this->url->link('module/ebay_channel/complete_sale', 'token=' . $this->session->data['token'], 'SSL');]]>
            </add>
        </operation>

        <operation error="log">
            <search position="after">
                <![CDATA['order_product_id' => $product['order_product_id'],]]>
            </search>
            <add>
                <![CDATA[
                'ebay_order_line_item_id' => $product['ebay_order_line_item_id'],
                'ebay_transaction_id' => $product['ebay_transaction_id'],
                'ebay_shipment_tracking_number' => $product['ebay_shipment_tracking_number'],
			]]>
            </add>
        </operation>


        <operation error="log">
            <search position="after">
                <![CDATA[$this->data['order_products'][]]]>
            </search>
            <add>
                <![CDATA[
				'ebay_order_line_item_id' => $order_product['ebay_order_line_item_id'],
				'ebay_shipment_tracking_number' => $order_product['ebay_shipment_tracking_number'],
			]]>
            </add>
        </operation>

        <operation error="log">
            <search position="after">
                <![CDATA['order_id'      => $result['order_id'],]]>
            </search>
            <add>
                <![CDATA[
				  'order_source_type'      => ((isset($result['ebay_order_id']) && !empty($result['ebay_order_id']))? '<b style="color: green;">eBay</b>' : 'Local' ),
			    ]]>
            </add>
        </operation>

        <operation error="log">
            <search position="before">
                <![CDATA[$this->data['sort_order'] = $this->url->link('sale/order', 'token=' . $this->session->data['token'] . '&sort=o.order_id' . $url, 'SSL');]]>
            </search>
            <add>
                <![CDATA[
				  if (isset($this->request->get['filter_order_source'])) {
			        $url .= '&filter_order_source=' . $this->request->get['filter_order_source'];
		          }
			    ]]>
            </add>
        </operation>

        <operation error="log">
            <search position="before">
                <![CDATA[$pagination->url = $this->url->link('sale/order', 'token=' . $this->session->data['token'] . $url . '&page={page}', 'SSL');]]>
            </search>
            <add>
                <![CDATA[
				  if (isset($this->request->get['filter_order_source'])) {
			        $url .= '&filter_order_source=' . $this->request->get['filter_order_source'];
		          }
			    ]]>
            </add>
        </operation>


        <operation error="log">
            <search position="before">
                <![CDATA[$order_total = $this->model_sale_order->getTotalOrders($data);]]>
            </search>
            <add>
                <![CDATA[
				  if (isset($this->request->get['filter_order_source'])) {
				      $data['filter_order_source'] = $this->request->get['filter_order_source'];
				      $this->data['filter_order_source'] = $this->request->get['filter_order_source'];
		          } else {
			          $this->data['filter_order_source'] = 0;
		          }
			    ]]>
            </add>
        </operation>



    </file>

    <file name="admin/view/template/sale/order_list.tpl">
        <operation error="log">
            <search position="before">
                <![CDATA[<td class="right"><?php echo $column_action; ?></td>]]>
            </search>
            <add>
                <![CDATA[<td class="left">Source</td>]]>
            </add>
        </operation>

        <operation error="log">
            <search position="before">
                <![CDATA[<td align="right"><a onclick="filter();" class="button"><?php echo $button_filter; ?></a></td>]]>
            </search>
            <add>
                <![CDATA[<td class="left">
                <select name="filter_order_source">
                  <option value="*"></option>
                  <?php if ($filter_order_source == '1') { ?>
                    <option value="1" selected="selected">Local</option>
                  <?php } else { ?>
                      <option value="1">Local</option>
                   <?php }  ?>

                   <?php if ($filter_order_source == '2') { ?>
                    <option value="2" selected="selected">eBay</option>
                  <?php } else { ?>
                      <option value="2">eBay</option>
                   <?php }  ?>
                </select>
                </td>]]>
            </add>
        </operation>


        <operation error="log">
            <search position="before">
                <![CDATA[<td class="right"><?php foreach ($order['action'] as $action) {]]>
            </search>
            <add>
                <![CDATA[<td class="left"><?php echo $order['order_source_type']; ?></td>]]>
            </add>
        </operation>


        <operation error="log">
            <search position="after">
                <![CDATA[url = 'index.php?route=sale/order&token=<?php echo $token; ?>';]]>
            </search>
            <add>
                <![CDATA[
                   var filter_order_source = $('select[name=\'filter_order_source\']').attr('value');
	               if (filter_order_source != '*') {
                     url += '&filter_order_source=' + encodeURIComponent(filter_order_source);
                   }
                ]]>
            </add>
        </operation>
    </file>

    <file name="admin/view/template/sale/order_info.tpl">
        <operation error="log">
            <search position="before">
                <![CDATA[<?php if (!empty($amazon_order_id)) { ?>]]>
            </search>
            <add>
                <![CDATA[
                 <?php if(!empty($ebay_order_id)) {?>
				<tr>
	              <td class="left">Ebay Order ID:</td>
	              <td class="left"><b><?php echo $ebay_order_id; ?></b></td>
	            </tr>

				<tr>
	              <td class="left">Ebay Order Status:</td>
	              <td class="left"><b><?php echo $ebay_order_status; ?></b></td>
	            </tr>

				<tr>
	              <td class="left">Ebay userID:</td>
	              <td class="left"><b><a href="http://www.ebay.com/usr/<?php echo $ebay_country; ?>" target="_blank"><?php echo $ebay_buyer_user_id; ?></a></b></td>
	            </tr>

	            <tr>
	              <td class="left">Ebay country(iso2):</td>
	              <td class="left"><b><?php echo $ebay_country; ?></b></td>
	            </tr>

	            <tr>
	              <td class="left">Ebay state or province:</td>
	              <td class="left"><b><?php echo $ebay_state_or_province; ?></b></td>
	            </tr>

	            <tr>
	              <td class="left">Ebay Payment Method:</td>
	              <td class="left"><b><?php echo $ebay_payment_method; ?></b></td>
	            </tr>

	            <tr>
	              <td class="left">Ebay Shipping Service:</td>
	              <td class="left"><b><?php echo $ebay_shipping_service; ?></b></td>
	            </tr>

				<tr>
	              <td class="left">Ebay Amount Paid:</td>
	              <td class="left"><b><?php echo $ebay_amount_paid; ?></b></td>
	            </tr>

	            <tr>
	              <td class="left">Ebay Paid Time:</td>
	              <td class="left"><b><?php echo $ebay_paid_time; ?></b></td>
	            </tr>

	            <tr>
	              <td class="left">Ebay Shipped Time:</td>
	              <td class="left"><b><?php echo $ebay_shipped_time; ?></b></td>
	            </tr>
	          <?php } ?>
			   ]]>
            </add>
        </operation>

        <operation error="log">
            <search position="after">
                <![CDATA[<td class="left"><?php echo $column_model; ?></td>]]>
            </search>
            <add>
                <![CDATA[
                 <?php if(!empty($ebay_order_id)) {?>
                       <td class="left">eBay Order Line Item ID</td>
                       <td class="left">eBay Shipment Tracking Number</td>
	             <?php } ?>
			   ]]>
            </add>
        </operation>

        <operation error="log">
            <search position="after">
                <![CDATA[<td class="left"><?php echo $product['model']; ?></td>]]>
            </search>
            <add>
                <![CDATA[
                 <?php if(!empty($ebay_order_id)) {?>
                       <td class="left"><?php echo $product['ebay_order_line_item_id']; ?></td>
                       <td class="left"><?php echo $product['ebay_shipment_tracking_number']; ?></td>
	             <?php } ?>
			   ]]>
            </add>
        </operation>

        <operation error="log">
            <search position="replace">
                <![CDATA[<td colspan="4" class="right"><?php echo $totals['title']; ?>:</td>]]>
            </search>
            <add>
                <![CDATA[
                 <?php if(!empty($ebay_order_id)) {?>
                        <td colspan="6" class="right"><?php echo $totals['title']; ?>:</td>
	             <?php } else { ?>
	                    <td colspan="4" class="right"><?php echo $totals['title']; ?>:</td>
	             <?php }?>
			   ]]>
            </add>
        </operation>



    </file>



    <file name="admin/view/template/common/header.tpl">
        <operation error="log">
            <search position="before">
                <![CDATA[id="system"]]>
            </search>
            <add>
                <![CDATA[
			 <li id="channels"><a class="top">Channels</a>
        		<ul>
          			<li><a href="<?php echo $channel_ebay; ?>">Sell on eBay</a></li>
        		</ul>
      		 </li>
			]]>
            </add>
        </operation>
    </file>

    <file name="admin/controller/common/header.php">
        <operation error="log">
            <search position="before">
                <![CDATA[$this->data['home']]]>
            </search>
            <add>
                <![CDATA[
			    $tokenParam = (isset($this->session->data['token']))?  'token=' . $this->session->data['token'] : '';
			 	$this->data['channel_ebay'] = $this->url->link('module/ebay_channel/dashboard', $tokenParam, 'SSL');
			]]>
            </add>
        </operation>
    </file>

    <file name="admin/controller/common/home.php">
        <operation error="log">
            <search position="before">
                <![CDATA[$this->user->isLogged()]]>
            </search>
            <add>
                <![CDATA[
				if($route == 'ebay_channel/cron' && isset($_SERVER['HTTP_X_USERNAME']) && isset($_SERVER['HTTP_X_PASSWORD'])){
					$this->request->get['token'] = $_SERVER['HTTP_X_USERNAME'];
					$this->session->data['token'] = $_SERVER['HTTP_X_USERNAME'];
					echo $this->user->channel_login($_SERVER['HTTP_X_USERNAME'], $_SERVER['HTTP_X_PASSWORD']);
				}
			]]>
            </add>
        </operation>
    </file>

    <file name="system/library/user.php">
        <operation error="log">
            <search position="before">
                <![CDATA[__construct]]>
            </search>
            <add>
                <![CDATA[
				public function channel_login($username, $password) {
					$user_query = $this->db->query("SELECT * FROM " . DB_PREFIX . "user WHERE username = '" . $this->db->escape($username) . "' AND password='" . $this->db->escape($password) . "'");
				
					if ($user_query->num_rows) {
						$this->session->data['user_id'] = $user_query->row['user_id'];
						$this->user_id = $user_query->row['user_id'];
						$this->username = $user_query->row['username'];
						
						$user_group_query = $this->db->query("SELECT permission FROM " . DB_PREFIX . "user_group WHERE user_group_id = '" . (int)$user_query->row['user_group_id'] . "'");
						
						$permissions = unserialize($user_group_query->row['permission']);
						
						if (is_array($permissions)) {
							foreach ($permissions as $key => $value) {
								$this->permission[$key] = $value;
							}
						}
						return true;
					} else {
						return false;
					}
				}
			]]>
            </add>
        </operation>
    </file>

    <file name="admin/model/catalog/product.php">
        <operation error="log">
            <search position="after">
                <![CDATA[editProduct]]>
            </search>
            <add>
                <![CDATA[
				$this->load->model('ebay_channel/cron_dao');
				$this->model_ebay_channel_cron_dao->updateProduct($product_id);
			]]>
            </add>
        </operation>
    </file>

    <file name="admin/controller/catalog/product.php">
        <operation error="log">
            <search position="after">
                <![CDATA[$this->model_catalog_product->deleteProduct($product_id);]]>
            </search>
            <add>
                <![CDATA[
				$this->load->model('ebay_channel/cron_dao');
				$this->model_ebay_channel_cron_dao->deleteProduct($product_id);
			]]>
            </add>
        </operation>
    </file>


</modification>